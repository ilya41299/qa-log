# qa-log
## Анализ лога веб-сервера

### Цель:

Потренироваться писать парсеры для логов

### Описание:

Написать скрипт анализа [access.log](access.tar.gz) файла

Формат записи в файле лога:

```bash
%h - - %t "%r" %s %b "%{Referer}" "%{User-Agent}" %d
```

`%h` - IP-адрес удаленного хоста  
`%t` - время получения запроса  
`%r` - тип запроса, его содержимое и версия протокола  
`%s` - код состояния HTTP  
`%b` - количество отданных сервером байт  
`%{Referer}` - URL-источник запроса  
`%{User-Agent}` - HTTP-заголовок, содержащий информацию о запросе  
`%d` - длительность запроса в миллисекундах  

Требования к реализации:

1. Должна быть возможность указать директорий где искать логи или конкретный файл
2. Должна быть возможность обработки всех логов внутри одного директория
3. Для лога должна собираться следующая информация:
   - общее количество выполненных запросов
   - количество запросов по HTTP-методам: GET, POST, PUT, DELETE, OPTIONS, HEAD. Например, GET - 20, POST - 10 и т.п.
   - топ 3 IP адресов, с которых было сделано наибольшее количество запросов
   - топ 3 самых долгих запросов - должны выводиться HTTP-метод, URL, IP, длительность запроса, дата и время запроса
4. Собранная статистика должна быть сохранена в json-файл и выведена в терминал в следующем [формате](result.json)
5. Если в процессе работы скрипта было проанализировано несколько лог-файлов, то для каждого из файлов должен быть 
сформирован отдельный json-файл со статистикой и отдельный вывод в терминал
6. В репозитории должен присутствовать `README.md` файл, который описывает как работает скрипт

### Описание работы:
Для запуска скрипта исполнить файл `server_logs_parser.py` передав путь до файла или директории с логами через `-l` или `--logs` (по умолчанию `logs=./logs`)
```commandline
 python server_logs_parser.py -l logs
```
После исполнения результат будет выведен в консоль и в json-файл `{log_file_name}.json` в папке `results`. 
<p align="left">
 <img width="500px" src="images/example.jpg" alt="example"/>
</p>